@* Heart Rate Loading Animation *@

<div class="heart-loader @(IsDarkMode ? "dark" : "light")">
    <div class="ecg-container">
        <svg viewBox="0 0 300 80" class="ecg-svg">
            <path class="ecg-path" d="M0,40 L30,40 L35,25 L40,55 L45,15 L50,65 L55,40 L80,40 L85,30 L90,50 L95,20 L100,60 L105,40 L130,40 L135,35 L140,45 L145,25 L150,55 L155,40 L180,40 L185,20 L190,60 L195,10 L200,70 L205,40 L230,40 L235,30 L240,50 L245,25 L250,55 L255,40 L300,40" />
        </svg>
    </div>
    <div class="loading-text">Loading messages...</div>
</div>

<style>
    .heart-loader {
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        height: 100%;
        min-height: 200px;
        gap: 1.5rem;
    }

    .ecg-container {
        width: 300px;
        height: 80px;
    }

    .ecg-svg {
        width: 100%;
        height: 100%;
    }

    .ecg-path {
        fill: none;
        stroke-width: 4;
        stroke-linecap: round;
        stroke-linejoin: round;
        stroke-dasharray: 300;
        stroke-dashoffset: 300;
        animation: drawECG 2s ease-in-out infinite;
    }

    .loading-text {
        font-size: 1rem;
        font-weight: 500;
        text-align: center;
    }

    @@keyframes drawECG {
        0% {
            stroke-dashoffset: 300;
        }
        50% {
            stroke-dashoffset: 0;
        }
        100% {
            stroke-dashoffset: -300;
        }
    }

    .heart-loader.light {
        color: #374151;
    }

    .heart-loader.light .ecg-path {
        stroke: #3b82f6;
    }

    .heart-loader.dark {
        color: #d1d5db;
    }

    .heart-loader.dark .ecg-path {
        stroke: #60a5fa;
    }

    @@media (max-width: 640px) {
        .ecg-container {
            width: 250px;
            height: 60px;
        }
    }
</style>

@code {
    [Parameter] public bool IsDarkMode { get; set; } = false;
}